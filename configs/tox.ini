[tox]
envlist = py313,lint,format-check
skipsdist = True
minversion = 4.0

[testenv]
description = Run unit tests with pytest
deps =
    pytest>=8.0
    pytest-asyncio
    numpy
    scipy
    matplotlib
commands =
    pytest {posargs:tests/}

[testenv:quick-bench]
description = Quick benchmark at 41Â³ resolution
deps =
    {[testenv]deps}
commands =
    python benchmark_solver.py --resolution 41 --runs 2 --materials rb87_bec --xi 100

[testenv:lint]
description = Run linters (flake8)
deps =
    flake8>=7.0
    flake8-docstrings
commands =
    flake8 src/ examples/ tests/ --max-line-length=100 --ignore=E501,W503,D100,D101,D102,D103,D104,D105,D107

[testenv:format-check]
description = Check code formatting (black, isort)
deps =
    black>=24.0
    isort>=5.13
commands =
    black --check --diff src/ examples/ tests/
    isort --check-only --diff src/ examples/ tests/

[testenv:format]
description = Auto-format code (black, isort)
deps =
    black>=24.0
    isort>=5.13
commands =
    black src/ examples/ tests/
    isort src/ examples/ tests/
